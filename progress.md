# Progress & TODO

Этот файл используется для отслеживания прогресса разработки интернет-магазина АСО и планирования задач.

## Completed Tasks

### Initial Setup (2024-06-17)
- ✅ Создана структура монорепозитория
- ✅ Инициализирован корневой package.json с npm workspaces
- ✅ Установлен и настроен NestJS 11 для backend
- ✅ Установлен и настроен Next.js 15 для frontend  
- ✅ Настроены скрипты для запуска проектов
- ✅ Инициализирован Git репозиторий
- ✅ Создан .gitignore файл
- ✅ Создан CLAUDE.md с инструкциями для будущей разработки
- ✅ Создан progress.md для отслеживания задач

### Backend Infrastructure (2024-06-17)
- ✅ Установлен Prisma ORM и PostgreSQL драйвер
- ✅ Создан Prisma сервис в NestJS (глобальный модуль)
- ✅ Установлен и настроен Swagger для API документации
- ✅ Установлены зависимости для JWT авторизации (passport, passport-jwt)
- ✅ Установлены и настроены пакеты для валидации (class-validator, class-transformer)
- ✅ Настроен CORS для режима разработки (разрешены все источники)
- ✅ Создана базовая схема БД в Prisma с моделями:
  - User (поддержка анонимных и авторизованных)
  - Session (для управления сессиями)
  - Category (иерархическая структура)
  - Product с Specification
  - Vehicle (Brand, Model, Generation)
  - Cart и CartItem
  - Favorite
  - Order с динамическими статусами
  - DeliveryMethod и PaymentMethod (управляемые)
  - Chat и ProductOffer
- ✅ Создан .env.example файл

### Frontend UI Setup (2024-06-17)
- ✅ Добавлены иконки и логотип проекта в структуру Next.js
- ✅ Создан компонент Logo для использования в приложении
- ✅ Обновлен layout с логотипом в header
- ✅ Настроены favicon и иконки для всех платформ
- ✅ Создан manifest.json для PWA поддержки

## TODO - High Priority

### Backend Infrastructure
- [x] Установить и настроить PostgreSQL
- [x] Установить и настроить Prisma ORM
- [x] Создать базовую схему БД (users, sessions, products, carts, orders)
- [x] Настроить Swagger для API документации
- [x] Настроить CORS для режима разработки
- [ ] Реализовать JWT авторизацию
- [ ] Создать систему анонимных сессий

### Frontend Infrastructure
- [ ] Настроить структуру папок и компонентов
- [ ] Установить и настроить axios/fetch wrapper для API
- [ ] Создать базовые layouts (главная, каталог, личный кабинет)
- [ ] Настроить систему роутинга
- [ ] Реализовать state management для корзины и пользователя

### Authentication & Users
- [ ] SMS провайдер для отправки кодов
- [ ] API endpoints для регистрации/авторизации
- [ ] Миграция анонимной сессии к пользователю
- [ ] Личный кабинет пользователя

## TODO - Medium Priority

### Product Catalog
- [ ] Модель данных для категорий (иерархическая)
- [ ] Модель данных для товаров с характеристиками
- [ ] Связь товаров с марками/моделями авто
- [ ] API для каталога с фильтрацией и пагинацией
- [ ] UI каталога с фильтрами
- [ ] Поиск по товарам

### Shopping Features
- [ ] Корзина (backend + frontend)
- [ ] Избранное (backend + frontend)
- [ ] Сравнение товаров

### Orders
- [ ] Управляемые статусы заказов (admin panel)
- [ ] Методы доставки (настраиваемые)
- [ ] Методы оплаты (настраиваемые)
- [ ] Оформление заказа (checkout flow)
- [ ] История заказов

## TODO - Low Priority

### Expert Chat System
- [ ] WebSocket сервер для real-time чата
- [ ] Модель данных для чатов и сообщений
- [ ] UI чата для клиентов
- [ ] Интерфейс менеджера для чатов
- [ ] Товарные предложения (ProductOffers)
- [ ] Интеграция товарных предложений с корзиной

### Admin Panel
- [ ] Управление товарами
- [ ] Управление заказами
- [ ] Управление пользователями
- [ ] Настройки магазина (статусы, доставка, оплата)
- [ ] Статистика и аналитика

### Performance & Optimization
- [ ] Redis для кеширования
- [ ] Оптимизация изображений
- [ ] CDN интеграция
- [ ] SEO оптимизация
- [ ] PWA функционал

## Notes & Decisions

### Архитектурные решения
- Используем анонимные сессии для улучшения UX - пользователи могут добавлять в корзину без регистрации
- Товарные предложения - отдельная сущность для гибкости в чатах с менеджерами
- Управляемые статусы/методы доставки/оплаты для масштабируемости бизнеса

### Технические заметки
- Prisma выбрана для type-safety и удобства миграций
- SMS авторизация вместо email для упрощения процесса
- WebSockets для чата вместо polling для real-time опыта

## Current Sprint Focus

Текущий фокус: базовая инфраструктура
1. PostgreSQL + Prisma setup
2. Базовая схема БД
3. JWT авторизация + анонимные сессии
4. Swagger документация